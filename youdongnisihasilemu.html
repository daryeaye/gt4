<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Lost Treasure Pt4 Chef Mario</title><link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet"><style>body,html{margin:0;padding:0;height:100vh;display:flex;justify-content:center;align-items:center;background:url('https://daryeaye.github.io/geotopia/thatsit.png') no-repeat center center fixed;background-size:cover}#app-container{display:flex;flex-direction:column;align-items:center}#header{width:960px;background:#eee;padding:10px;margin-bottom:10px}#container{position:relative;width:960px;height:540px;border:1px solid #ccc;background:white;overflow:hidden}.page{position:absolute;top:0;left:0;width:960px;height:540px;display:none}.page.active{display:block}.box{position:absolute}input.typeable{position:absolute;font-family:"Comic Sans MS",sans-serif;font-size:22px;border:1px solid black;background:rgba(173,216,230,0.5);box-sizing:border-box;text-align:center}.page3-input{font-size:18px}#page13 .draggable{position:relative;font-family:"Caveat",cursive;font-size:60px}#progressBar{width:100%;background:#ccc;height:20px;margin-top:10px}#progress{width:0%;background:green;height:100%}#header-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}#translation-widget span{vertical-align:middle}#translation-widget a{text-decoration:none}#nav-buttons{margin-top:10px}button{font-family:"Caveat",cursive;font-size:20px;background-color:lightblue;border:none;padding:10px 20px;margin:0 5px;cursor:pointer}#page1{background:url("https://daryeaye.github.io/gt4/4-01.jpg") no-repeat center center;background-size:cover}#page2{background:url("https://daryeaye.github.io/gt4/4-02.jpg") no-repeat center center;background-size:cover}#page3{background:url("https://daryeaye.github.io/gt4/4-03.jpg") no-repeat center center;background-size:cover}#page4{background:url("https://daryeaye.github.io/gt4/4-04.jpg") no-repeat center center;background-size:cover}#page5{background:url("https://daryeaye.github.io/gt4/4-05.jpg") no-repeat center center;background-size:cover}#page6{background:url("https://daryeaye.github.io/gt4/4-06.jpg") no-repeat center center;background-size:cover}#page7{background:url("https://daryeaye.github.io/gt4/4-07.jpg") no-repeat center center;background-size:cover}#page8{background:url("https://daryeaye.github.io/gt4/4-08.jpg") no-repeat center center;background-size:cover}#page9{background:url("https://daryeaye.github.io/gt4/4-09.jpg") no-repeat center center;background-size:cover}#page10{background:url("https://daryeaye.github.io/gt4/4-10.jpg") no-repeat center center;background-size:cover}#page11{background:url("https://daryeaye.github.io/gt4/4-11.jpg") no-repeat center center;background-size:cover}#page12{background:url("https://daryeaye.github.io/gt4/4-12.jpg") no-repeat center center;background-size:cover}#page13{background:url("https://daryeaye.github.io/gt4/4-13.jpg") no-repeat center center;background-size:cover}#page14{background:url("https://daryeaye.github.io/gt4/4-14.jpg") no-repeat center center;background-size:cover}#page15{background:url("https://daryeaye.github.io/gt4/4-15.jpg") no-repeat center center;background-size:cover}#page16{background:url("https://daryeaye.github.io/gt4/4-16.jpg") no-repeat center center;background-size:cover}#page17{background:url("https://daryeaye.github.io/gt4/4-17.jpg") no-repeat center center;background-size:cover}#page18{background:url("https://daryeaye.github.io/gt4/4-18.jpg") no-repeat center center;background-size:cover}#page19{background:url("https://daryeaye.github.io/gt4/4-19.jpg") no-repeat center center;background-size:cover}#page20{background:url("https://daryeaye.github.io/gt4/4-20.jpg") no-repeat center center;background-size:cover}#page21{background:url("https://daryeaye.github.io/gt4/4-21.jpg") no-repeat center center;background-size:cover}#page22{background:url("https://daryeaye.github.io/gt4/4-22.jpg") no-repeat center center;background-size:cover}#page23{background:url("https://daryeaye.github.io/gt4/4-23.jpg") no-repeat center center;background-size:cover}#page24{background:url("https://daryeaye.github.io/gt4/4-24.jpg") no-repeat center center;background-size:cover}</style><style>#side-widget{position:fixed;top:20px;right:20px;width:200px;height:200px;background:#f9f9f9;border:1px solid #ccc;padding:10px;box-sizing:border-box;font-family:'Caveat',cursive;z-index:999}#side-widget p.title{font-size:24px;text-align:center;margin:0 0 10px}#side-widget button,#side-widget a{display:block;margin:0 auto;font-size:20px;cursor:pointer;text-align:center;background:lightblue;border:none;padding:10px;text-decoration:none;color:inherit}#selection-overlay{position:fixed;top:0;left:0;width:100%;height:100%;cursor:crosshair;z-index:1000}#selection-box{position:absolute;border:2px dashed red;background:rgba(0,0,0,0.1)}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script></head><body><div id="app-container"><div id="header"><div id="header-top"><div><input type="text" id="username" placeholder="Enter your name" style="font-size:16px; padding:5px;" /><button id="confirmBtn" onclick="confirmName()">Confirm</button></div></div><div id="progressBar"><div id="progress"></div></div><span id="progressText">0% completed</span></div><div id="container"><div id="page1" class="page active"><a href="https://daryeaye.github.io/geotopia/GT1%20Officer+.pdf" target="_blank"><div class="box" style="left:12px; top:385px; width:120px; height:108px; border:1px solid red;"></div></a><a href="https://daryeaye.github.io/geotopia/GT1%20Professor+.pdf" target="_blank"><div class="box" style="left:153px; top:385px; width:120px; height:108px; border:1px solid red;"></div></a><a href="https://daryeaye.github.io/geotopia/GT1%20Hacker+.pdf" target="_blank"><div class="box" style="left:293px; top:385px; width:120px; height:108px; border:1px solid red;"></div></a><a href="https://www.youtube.com/watch?v=Fj98o3aFfk8" target="_blank" style="position:absolute; left:134px; top:500px; width:177px; height:32px; background-color:rgba(128,128,128,0.9); font-family:'Caveat',cursive;font-size:22px;display:flex;align-items:center;justify-content:center;text-decoration:none;color:white;">What is the role for?</a></div><div id="page2" class="page"></div><div id="page3" class="page"><input type="text" id="page3_input1" class="typeable page3-input" style="left:22px; top:191px; width:112px; height:30px;"><input type="text" id="page3_input2" class="typeable page3-input" style="left:22px; top:287px; width:139px; height:30px;"><input type="text" id="page3_input3" class="typeable page3-input" style="left:219px; top:325px; width:153px; height:30px;"><input type="text" id="page3_input4" class="typeable page3-input" style="left:207px; top:384px; width:139px; height:30px;"><input type="text" id="page3_input5" class="typeable page3-input" style="left:270px; top:421px; width:139px; height:30px;"></div><div id="page4" class="page"><canvas id="canvas4" width="960" height="540" style="border:1px solid #ccc;"></canvas><button id="reset4" style="position:absolute;bottom:10px;right:10px;">Reset</button></div><div id="page5" class="page"><canvas id="canvas5" width="960" height="540" style="border:1px solid #ccc;"></canvas><button id="reset5" style="position:absolute;bottom:10px;right:10px;">Reset</button></div><div id="page6" class="page"><div style="transform:scale(0.7);transform-origin:top center;width:100%;display:flex;justify-content:center;padding-top:10px;"><iframe src="https://www.geogebra.org/material/iframe/id/nwjp94mb/width/1200/height/600/border/888888/rc/false/ai/false" width="1200" height="500" style="border:0;"></iframe></div><input type="text" id="page6_input1" class="typeable" style="left:285px; top:399px; width:100px; height:44px;"><input type="text" id="page6_input2" class="typeable" style="left:285px; top:474px; width:100px; height:43px;"></div><div id="page7" class="page"><input type="text" id="page7_input1" class="typeable" style="left:537px; top:226px; width:374px; height:43px;"><input type="text" id="page7_input2" class="typeable" style="left:268px; top:226px; width:117px; height:43px;"><input type="text" id="page7_input3" class="typeable" style="left:537px; top:273px; width:374px; height:43px;"><input type="text" id="page7_input4" class="typeable" style="left:268px; top:273px; width:117px; height:43px;"><input type="text" id="page7_input5" class="typeable" style="left:537px; top:320px; width:374px; height:43px;"><input type="text" id="page7_input6" class="typeable" style="left:170px; top:320px; width:117px; height:43px;"><input type="text" id="page7_input7" class="typeable" style="left:671px; top:404px; width:166px; height:52px;"></div><div id="page8" class="page"><input type="text" id="page8_input1" class="typeable" style="left:707px; top:124px; width:68px; height:46px;"><input type="text" id="page8_input2" class="typeable" style="left:49px; top:168px; width:104px; height:46px;"><input type="text" id="page8_input3" class="typeable" style="left:492px; top:207px; width:102px; height:44px;"></div><div id="page9" class="page"><div style="transform:scale(0.7);transform-origin:top center;width:100%;display:flex;justify-content:center;padding-top:10px;"><iframe src="https://daryeaye.github.io/gt4/circle.html" width="1200" height="600" style="border:0;"></iframe></div><div id="page9_modal" style="display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border:2px solid black;padding:20px;z-index:1000;"><p>Chef Mario needs to make sure youâ€™ve watched the whole process from start to finish.</p><button onclick="finishPage9()">Finished</button><button onclick="cancelPage9()">Not yet</button></div></div><div id="page10" class="page"><div style="transform:scale(0.7);transform-origin:top center;width:100%;display:flex;justify-content:center;padding-top:10px;"><iframe src="https://www.geogebra.org/material/iframe/id/wrnwxz65/width/1200/height/700/border/888888/rc/false/ai/false" width="1200" height="570" style="border:0;"></iframe></div><input type="text" id="page10_input1" class="typeable" style="left:780px; top:414px; width:100px; height:43px;"><input type="text" id="page10_input2" class="typeable" style="left:765px; top:459px; width:100px; height:43px;"></div><div id="page11" class="page"><input type="text" id="page11_input1" class="typeable" style="left:631px; top:215px; width:292px; height:43px;"><input type="text" id="page11_input2" class="typeable" style="left:374px; top:216px; width:171px; height:43px;"><input type="text" id="page11_input3" class="typeable" style="left:147px; top:216px; width:117px; height:43px;"><input type="text" id="page11_input4" class="typeable" style="left:631px; top:266px; width:292px; height:43px;"><input type="text" id="page11_input5" class="typeable" style="left:374px; top:266px; width:171px; height:43px;"><input type="text" id="page11_input6" class="typeable" style="left:147px; top:266px; width:117px; height:43px;"><input type="text" id="page11_input7" class="typeable" style="left:321px; top:315px; width:104px; height:43px;"><input type="text" id="page11_input8" class="typeable" style="left:147px; top:315px; width:117px; height:43px;"><input type="text" id="page11_input9" class="typeable" style="left:631px; top:316px; width:292px; height:43px;"><input type="text" id="page11_input10" class="typeable" style="left:442px; top:425px; width:142px; height:52px;"></div><div id="page12" class="page"><input type="text" id="page12_input1" class="typeable" style="left:258px; top:139px; width:119px; height:45px;"><input type="text" id="page12_input2" class="typeable" style="left:787px; top:139px; width:86px; height:44px;"><input type="text" id="page12_input3" class="typeable" style="left:769px; top:188px; width:114px; height:45px;"><!-- Note: only input1 and input3 are validated --></div><div id="page13" class="page"><div id="page13_box1" class="draggable" style="left:836px; top:146px; width:61px; height:75px;position:absolute;border:1px solid black;text-align:center;line-height:75px;">r</div><div id="page13_box2" class="draggable" style="left:750px; top:150px; width:61px; height:67px;position:absolute;border:1px solid black;text-align:center;line-height:67px;">Ï€</div><div id="page13_box3" class="draggable" style="left:790px; top:237px; width:61px; height:74px;position:absolute;border:1px solid black;text-align:center;line-height:74px;">Ï€</div><div id="page13_box4" class="draggable" style="left:874px; top:237px; width:60px; height:74px;position:absolute;border:1px solid black;text-align:center;line-height:74px;">2</div><div id="page13_box5" class="draggable" style="left:707px; top:239px; width:61px; height:75px;position:absolute;border:1px solid black;text-align:center;line-height:75px;">Ï€</div><div id="page13_box6" class="draggable" style="left:734px; top:327px; width:61px; height:75px;position:absolute;border:1px solid black;text-align:center;line-height:75px;">d</div><div id="page13_box7" class="draggable" style="left:840px; top:327px; width:75px; height:74px;position:absolute;border:1px solid black;text-align:center;line-height:74px;">rÂ²</div></div><div id="page14" class="page"></div><div id="page15" class="page"><input type="text" id="page15_input1" class="typeable" style="left:427px; top:226px; width:420px; height:205px; font-size:20px;"></div><div id="page16" class="page"><input type="text" id="page16_input1" class="typeable" style="left:570px; top:91px; width:82px; height:45px;"><input type="text" id="page16_input2" class="typeable" style="left:484px; top:254px; width:327px; height:80px;"><input type="text" id="page16_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page17" class="page"><input type="text" id="page17_input1" class="typeable" style="left:596px; top:150px; width:82px; height:45px;"><input type="text" id="page17_input2" class="typeable" style="left:484px; top:254px; width:327px; height:80px;"><input type="text" id="page17_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page18" class="page"><input type="text" id="page18_input1" class="typeable" style="left:579px; top:89px; width:82px; height:45px;"><input type="text" id="page18_input2" class="typeable" style="left:484px; top:254px; width:327px; height:80px;"><input type="text" id="page18_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page19" class="page"><input type="text" id="page19_input1" class="typeable" style="left:596px; top:150px; width:82px; height:45px;"><input type="text" id="page19_input2" class="typeable" style="left:484px; top:254px; width:327px; height:80px;"><input type="text" id="page19_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page20" class="page"><input type="text" id="page20_input1" class="typeable" style="left:573px; top:90px; width:82px; height:45px;"><input type="text" id="page20_input2" class="typeable" style="left:596px; top:150px; width:82px; height:45px;"><input type="text" id="page20_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page21" class="page"><input type="text" id="page21_input1" class="typeable" style="left:573px; top:90px; width:82px; height:45px;"><input type="text" id="page21_input2" class="typeable" style="left:596px; top:150px; width:82px; height:45px;"><input type="text" id="page21_input3" class="typeable" style="left:484px; top:389px; width:327px; height:80px;"></div><div id="page22" class="page"></div><div id="page23" class="page"><input type="text" id="page23_input1" class="typeable" style="left:391px; top:373px; width:178px; height:44px;"><button id="unlockButton" style="position:absolute;left:391px;top:415px;width:100px;height:30px;" onclick="unlockPage23()">Unlock</button></div><div id="page24" class="page"><a href="https://daryeaye.github.io/gt4/alun.html" target="_blank" style="display:block;position:absolute;left:310px;top:435px;width:370px;height:45px;background:rgba(0,0,255,0.5);text-decoration:none;"></a></div></div><div id="nav-buttons"><button id="prev-btn" onclick="prevPage()">Previous</button><button id="next-btn" onclick="nextPage()">Next</button></div></div><script>let currentPage=1,totalPages=24,maxPageVisited=1;function updateProgress(){const p=(maxPageVisited/totalPages)*100;document.getElementById("progress").style.width=p+"%";document.getElementById("progressText").innerText=p.toFixed(0)+"% completed"}function validateCurrentPage(){if(currentPage===3){let cnt=0;for(let i=1;i<=5;i++){const inp=document.getElementById("page3_input"+i);if(inp && inp.value.trim()!=="") cnt++}if(cnt<3){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===7){const i6=document.getElementById("page7_input6"),i7=document.getElementById("page7_input7");if(i6 && !i6.value.includes("25")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i7 && !i7.value.includes("3.14")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===8){const i2=document.getElementById("page8_input2"),i3=document.getElementById("page8_input3");if(i2 && !i2.value.includes("21")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("15")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===10){const i1=document.getElementById("page10_input1"),i2=document.getElementById("page10_input2");if(i1 && !i1.value.includes("81")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i2 && !i2.value.includes("50")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===11){const i7=document.getElementById("page11_input7"),i8=document.getElementById("page11_input8"),i10=document.getElementById("page11_input10");if(i7 && !i7.value.includes("254")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i8 && !i8.value.includes("81")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i10 && !i10.value.includes("3.14")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===12){const i1=document.getElementById("page12_input1"),i3=document.getElementById("page12_input3");if(i1 && !i1.value.includes("18")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("38")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===15){const inp=document.getElementById("page15_input1");if(inp && !inp.value.includes("314")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===16){const i2=document.getElementById("page16_input2"),i3=document.getElementById("page16_input3");if(i2 && !i2.value.includes("23")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("45")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===17){const i2=document.getElementById("page17_input2"),i3=document.getElementById("page17_input3");if(i2 && !i2.value.includes("28")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("63")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===18){const i2=document.getElementById("page18_input2"),i3=document.getElementById("page18_input3");if(i2 && !i2.value.includes("12")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("12")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===19){const i2=document.getElementById("page19_input2"),i3=document.getElementById("page19_input3");if(i2 && !i2.value.includes("18")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}if(i3 && !i3.value.includes("28")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===20){const i3=document.getElementById("page20_input3");if(i3 && !i3.value.includes("7")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}if(currentPage===21){const i3=document.getElementById("page21_input3");if(i3 && !i3.value.includes("490")){alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.");return false}}return true}function unlockPage23(){const inp=document.getElementById("page23_input1");if(!inp)return;if(inp.value==="78.5ma"){window.open("https://daryeaye.github.io/geotopia/adebayue.pdf","_blank");inp.value="";nextPage()}else if(inp.value==="78.5"){alert("âœ…Yes! Ask the merchant to open it!")}else{alert("ðŸ™Chef Mario is unhappy. Letâ€™s make it correct.")}}function showPage(p){for(let i=1;i<=totalPages;i++){const pg=document.getElementById("page"+i);if(pg)pg.classList.remove("active")}const np=document.getElementById("page"+p);if(np)np.classList.add("active");document.getElementById("prev-btn").style.display=p===1?"none":"inline-block";document.getElementById("next-btn").style.display=p===totalPages?"none":"inline-block";updateProgress()}function nextPage(){if(currentPage===9){document.getElementById("page9_modal").style.display="block";return}if(!validateCurrentPage())return;if(currentPage<totalPages){currentPage++;if(currentPage>maxPageVisited)maxPageVisited=currentPage;showPage(currentPage)}}function prevPage(){if(currentPage>1){currentPage--;showPage(currentPage)}}function confirmName(){const nI=document.getElementById("username"),name=nI.value.trim();if(name!==""){localStorage.setItem("username",name);nI.disabled=!0;alert("Name confirmed as: "+name)}else{alert("Please enter a name.")}}function setupPersistence(){const n=localStorage.getItem("username"),ni=document.getElementById("username");if(n!==null&&n!==""){ni.value=n;ni.disabled=!0}document.querySelectorAll("input[type='text']").forEach(el=>{const key=el.id,st=localStorage.getItem(key);if(st!==null){el.value=st}el.addEventListener("input",()=>{localStorage.setItem(key,el.value)})})}function setupDrawing(cId,rId,sk){const c=document.getElementById(cId),ctx=c.getContext("2d");let drawing=!1,sX=0,sY=0,lines=[];const stored=localStorage.getItem(sk);if(stored){try{lines=JSON.parse(stored);redraw()}catch(e){lines=[]}}function redraw(){ctx.clearRect(0,0,c.width,c.height);lines.forEach(l=>{ctx.beginPath();ctx.moveTo(l.startX,l.startY);ctx.lineTo(l.endX,l.endY);ctx.strokeStyle='red';ctx.lineWidth=2;ctx.stroke()})}c.addEventListener("mousedown",e=>{if(lines.length>=3)return;drawing=!0;const r=c.getBoundingClientRect();sX=e.clientX-r.left;sY=e.clientY-r.top});c.addEventListener("mousemove",e=>{if(!drawing)return;const r=c.getBoundingClientRect(),curX=e.clientX-r.left,curY=e.clientY-r.top;redraw();ctx.beginPath();ctx.moveTo(sX,sY);ctx.lineTo(curX,curY);ctx.strokeStyle='red';ctx.lineWidth=2;ctx.stroke()});c.addEventListener("mouseup",e=>{if(!drawing)return;drawing=!0;const r=c.getBoundingClientRect(),eX=e.clientX-r.left,eY=e.clientY-r.top;lines.push({startX:sX,startY:sY,endX:eX,endY:eY});localStorage.setItem(sk,JSON.stringify(lines));redraw()});c.addEventListener("mouseleave",e=>{if(drawing){drawing=!1;const r=c.getBoundingClientRect(),eX=e.clientX-r.left,eY=e.clientY-r.top;lines.push({startX:sX,startY:sY,endX:eX,endY:eY});localStorage.setItem(sk,JSON.stringify(lines));redraw()}});document.getElementById(rId).addEventListener("click",()=>{ctx.clearRect(0,0,c.width,c.height);lines=[];localStorage.removeItem(sk)})}function setupDraggable(id){const b=document.getElementById(id);let offX,offY;b.addEventListener("mousedown",e=>{offX=e.clientX-b.offsetLeft;offY=e.clientY-b.offsetTop;function mH(e){b.style.left=(e.clientX-offX)+"px";b.style.top=(e.clientY-offY)+"px"}function uH(){document.removeEventListener("mousemove",mH);document.removeEventListener("mouseup",uH);localStorage.setItem(id,JSON.stringify({left:b.style.left,top:b.style.top}))}document.addEventListener("mousemove",mH);document.addEventListener("mouseup",uH)});const saved=localStorage.getItem(id);if(saved){const pos=JSON.parse(saved);b.style.left=pos.left;b.style.top=pos.top}}function finishPage9(){document.getElementById("page9_modal").style.display="none";if(!validateCurrentPage())return;currentPage++;if(currentPage>maxPageVisited)maxPageVisited=currentPage;showPage(currentPage)}function cancelPage9(){document.getElementById("page9_modal").style.display="none"}document.addEventListener("DOMContentLoaded",()=>{showPage(currentPage);setupPersistence();setupDrawing("canvas4","reset4","canvas4_lines");setupDrawing("canvas5","reset5","canvas5_lines");for(let i=1;i<=7;i++){setupDraggable("page13_box"+i)};if(document.getElementById("page9_modal")){}});
</script><style>#side-widget{position:fixed;top:20px;right:20px;width:200px;height:200px;background:#f9f9f9;border:1px solid #ccc;padding:10px;box-sizing:border-box;font-family:'Caveat',cursive;z-index:999}#side-widget p.title{font-size:24px;text-align:center;margin:0 0 10px}#side-widget button,#side-widget a{display:block;margin:0 auto;font-size:20px;cursor:pointer;text-align:center;background:lightblue;border:none;padding:10px;text-decoration:none;color:inherit}#selection-overlay{position:fixed;top:0;left:0;width:100%;height:100%;cursor:crosshair;z-index:1000}#selection-box{position:absolute;border:2px dashed red;background:rgba(0,0,0,0.1)}</style><div id="side-widget"><p class="title">Need translation?</p><button id="select-text">Select Text</button><p><a href="https://translate.google.com/?sl=en&tl=es&op=images" target="_blank">Click me and paste from clipboard</a></p></div><script>document.getElementById("select-text").addEventListener("click",function(){const o=document.createElement("div");o.id="selection-overlay";document.body.appendChild(o);let sX,sY,sB;o.addEventListener("mousedown",function(e){sX=e.clientX;sY=e.clientY;sB=document.createElement("div");sB.id="selection-box";sB.style.left=sX+"px";sB.style.top=sY+"px";sB.style.width="0px";sB.style.height="0px";o.appendChild(sB);function mH(e){const cX=e.clientX,cY=e.clientY,l=Math.min(sX,cX),t=Math.min(sY,cY),w=Math.abs(cX-sX),h=Math.abs(cY-sY);sB.style.left=l+"px";sB.style.top=t+"px";sB.style.width=w+"px";sB.style.height=h+"px"}function uH(e){o.removeEventListener("mousemove",mH);o.removeEventListener("mouseup",uH);const r=sB.getBoundingClientRect();document.body.removeChild(o);const T=document.getElementById("container"),TR=T.getBoundingClientRect();html2canvas(T,{useCORS:true,allowTaint:false}).then(canvas=>{const sf=canvas.width/TR.width,sx=(r.left-TR.left)*sf,sy=(r.top-TR.top)*sf,sw=r.width*sf,sh=r.height*sf,cc=document.createElement("canvas");cc.width=sw;cc.height=sh;const ctx=cc.getContext("2d");ctx.drawImage(canvas,sx,sy,sw,sh,0,0,sw,sh);cc.toBlob(blob=>{if(blob){const itm=new ClipboardItem({"image/png":blob});navigator.clipboard.write([itm]).then(()=>{alert("Screenshot copied to clipboard.")}).catch(err=>{console.error("Failed to copy screenshot to clipboard",err);alert("Failed to copy screenshot to clipboard.")})}})})}o.addEventListener("mousemove",mH);o.addEventListener("mouseup",uH)})});<!-- @XDY. All rights reserved. This code is the intellectual property of XDY. Unauthorized copying, reproduction, or redistribution is strictly prohibited. For educational use only. Contact the author for permissions. --></script></body></html>
